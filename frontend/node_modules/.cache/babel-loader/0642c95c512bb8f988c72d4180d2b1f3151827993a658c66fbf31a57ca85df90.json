{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\\\u96F2\\u6E67\\u667A\\u751F\\\\happysing_aws\\\\frontend\\\\src\\\\pages\\\\CasePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Home.css'; // Reuse the same gradient style\n\nimport { LightBulbIcon, ClockIcon } from '@heroicons/react/24/outline';\nimport { PaperAirplaneIcon } from '@heroicons/react/24/solid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CasePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState(null);\n  const [referenceImage, setReferenceImage] = useState(null);\n  const [timelineNodes, setTimelineNodes] = useState([]);\n\n  // Load any existing nodes from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item, index) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n  async function callPromptBooster(promptText) {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n    const data = await response.json();\n    console.log('[DEBUG] API Response:', data); // <-- add this to see what API really returns\n\n    const boostedPrompt = data.boosted_prompt; // <-- NO MORE JSON.parse(data.body)\n\n    return boostedPrompt;\n  }\n  const handlePromptSubmit = async (promptText, original) => {\n    setLoading(true);\n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n      const newHistoryItem = {\n        prompt: promptText,\n        // 👈 still user prompt\n        timestamp: Date.now()\n      };\n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n      setTimelineNodes(prevNodes => [...prevNodes, {\n        id: `node-${prevNodes.length}`,\n        data: {\n          prompt: promptText,\n          timestamp: newHistoryItem.timestamp,\n          tags: ['主機外殼'],\n          imageUrl: null\n        }\n      }]);\n\n      // ⬇️ navigate with both\n      navigate('/generator', {\n        state: {\n          productType: 'case',\n          prompt: original,\n          // user input\n          boostedPrompt: boostedPrompt,\n          // AI boosted\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        }\n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleBackToSelection = () => {\n    navigate('/');\n  };\n  const handleOpenMindmap = () => {\n    navigate('/mindmap', {\n      state: {\n        productType: 'case'\n      }\n    });\n  };\n  const handleOpenTimeline = () => {\n    navigate('/timeline', {\n      state: {\n        productType: 'case'\n      }\n    });\n  };\n  const handleTryLuck = () => {\n    const luckyPrompts = [\"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\", \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\", \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\", \"設計一款未來科技感的開放式機箱，突顯內部組件\"];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n  const handleFileChange = (event, type) => {\n    var _event$target$files;\n    const file = ((_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0]) || null;\n    if (type === 'base') {\n      setBaseImage(file);\n    } else {\n      setReferenceImage(file);\n    }\n  };\n  const handleNodeSelect = node => {\n    setCurrentPrompt(node.data.prompt);\n    // Optionally, you could auto-submit this prompt\n    // handlePromptSubmit(node.data.prompt);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container pb-24\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-container max-w-2xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleBackToSelection,\n          className: \"flex items-center text-black hover:text-gray-700\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            className: \"h-5 w-5 mr-1\",\n            viewBox: \"0 0 20 20\",\n            fill: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              fillRule: \"evenodd\",\n              d: \"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\",\n              clipRule: \"evenodd\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), \"\\u8FD4\\u56DE\\u9078\\u64C7\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleOpenTimeline,\n            className: \"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(ClockIcon, {\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this), \"\\u6B77\\u53F2\\u8A18\\u9304\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleOpenMindmap,\n            className: \"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(LightBulbIcon, {\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), \"\\u5FC3\\u667A\\u5716\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-center mb-4 text-black\",\n        children: \"\\u4E3B\\u6A5F\\u5916\\u6BBC\\u8A2D\\u8A08\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full flex justify-center mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleTryLuck,\n          className: \"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all shadow-lg\",\n          children: \"\\u8A66\\u624B\\u6C23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: currentPrompt,\n          onChange: e => {\n            setCurrentPrompt(e.target.value);\n            e.target.style.height = 'auto';\n            e.target.style.height = e.target.scrollHeight + 'px';\n          },\n          onKeyDown: async e => {\n            if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n              //e.preventDefault();\n              //handlePromptSubmit(currentPrompt.trim());\n              e.preventDefault();\n              const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n              handlePromptSubmit(boostedPrompt, currentPrompt.trim()); // <-- now pass boosted prompt here!\n            }\n          },\n          placeholder: \"\\u63CF\\u8FF0\\u60A8\\u7406\\u60F3\\u4E2D\\u7684\\u6563\\u71B1\\u5668\\u8A2D\\u8A08...\",\n          rows: 1,\n          className: \" flex-1 resize-none overflow-hidden  bg-white text-gray-800 placeholder-purple-400  focus:outline-none \",\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim()),\n          disabled: loading || !currentPrompt.trim(),\n          className: `\n      p-2 rounded-md transition\n      ${currentPrompt.trim() ? 'bg-purple-600 hover:bg-purple-700 text-white' : 'bg-purple-100 text-purple-300 cursor-not-allowed'}\n    `,\n          children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"Upload Base Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => handleFileChange(e, 'base'),\n            className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), baseImage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: [\"Selected: \", baseImage.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"Upload Reference Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => handleFileChange(e, 'reference'),\n            className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), referenceImage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: [\"Selected: \", referenceImage.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-4 text-gray-900\",\n          children: \"Chats in this project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 3\n        }, this), timelineNodes.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: timelineNodes.map((node, index) => {\n            var _node$data$tags;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => handleNodeSelect(node),\n                  className: \"flex items-start space-x-3 cursor-pointer flex-1\",\n                  children: [node.data.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: node.data.imageUrl,\n                    alt: node.data.prompt,\n                    className: \"w-12 h-12 object-cover rounded-md\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1 min-w-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-800 truncate\",\n                      children: node.data.prompt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-wrap gap-1 mt-1\",\n                      children: (_node$data$tags = node.data.tags) === null || _node$data$tags === void 0 ? void 0 : _node$data$tags.map((tag, tagIdx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\",\n                        children: tag\n                      }, tagIdx, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 299,\n                        columnNumber: 21\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 17\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mt-1\",\n                      children: new Date(node.data.timestamp).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 17\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 15\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handlePromptSubmit(node.data.prompt, node.data.prompt),\n                  className: \"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\",\n                  children: \"\\u91CD\\u65B0\\u4F7F\\u7528\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 11\n              }, this)\n            }, node.id || index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 9\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 5\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No history found yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 147,\n    columnNumber: 5\n  }, this);\n};\n_s(CasePage, \"lwqXgId0pojA/Tmo5aabQFmLVRw=\", false, function () {\n  return [useNavigate];\n});\n_c = CasePage;\nexport default CasePage;\nvar _c;\n$RefreshReg$(_c, \"CasePage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","LightBulbIcon","ClockIcon","PaperAirplaneIcon","jsxDEV","_jsxDEV","CasePage","_s","navigate","loading","setLoading","currentPrompt","setCurrentPrompt","baseImage","setBaseImage","referenceImage","setReferenceImage","timelineNodes","setTimelineNodes","stored","localStorage","getItem","history","JSON","parse","map","item","index","id","data","prompt","timestamp","Date","now","tags","imageUrl","error","console","callPromptBooster","promptText","response","fetch","method","headers","body","stringify","user_prompt","inspiration_image_ids","use_trends","json","log","boostedPrompt","boosted_prompt","handlePromptSubmit","original","newHistoryItem","push","setItem","prevNodes","length","state","productType","URL","createObjectURL","handleBackToSelection","handleOpenMindmap","handleOpenTimeline","handleTryLuck","luckyPrompts","randomPrompt","Math","floor","random","handleFileChange","event","type","_event$target$files","file","target","files","handleNodeSelect","node","className","children","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","style","height","scrollHeight","onKeyDown","key","shiftKey","trim","preventDefault","placeholder","rows","disabled","accept","name","_node$data$tags","src","alt","tag","tagIdx","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/雲湧智生/happysing_aws/frontend/src/pages/CasePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Home.css'; // Reuse the same gradient style\nimport ChatInput from '../components/ChatInput';\nimport { LightBulbIcon, ClockIcon } from '@heroicons/react/24/outline';\nimport { Timeline } from '../components/Timeline';\nimport { PaperAirplaneIcon } from '@heroicons/react/24/solid';\n\n\n\nconst CasePage: React.FC = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState<File | null>(null);\n  const [referenceImage, setReferenceImage] = useState<File | null>(null);\n  const [timelineNodes, setTimelineNodes] = useState<any[]>([]);\n  \n  // Load any existing nodes from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item: any, index: number) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n  \n  async function callPromptBooster(promptText: string): Promise<string> {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n  \n    const data = await response.json();\n    console.log('[DEBUG] API Response:', data);  // <-- add this to see what API really returns\n    \n    const boostedPrompt = data.boosted_prompt;   // <-- NO MORE JSON.parse(data.body)\n  \n    return boostedPrompt;\n  }\n  \n  \n  const handlePromptSubmit = async (promptText: string, original: string) => {\n    setLoading(true);\n  \n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n  \n      const newHistoryItem = {\n        prompt: promptText,   // 👈 still user prompt\n        timestamp: Date.now()\n      };\n  \n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n  \n      setTimelineNodes(prevNodes => [\n        ...prevNodes,\n        {\n          id: `node-${prevNodes.length}`,\n          data: {\n            prompt: promptText,\n            timestamp: newHistoryItem.timestamp,\n            tags: ['主機外殼'],\n            imageUrl: null\n          }\n        }\n      ]);\n  \n      // ⬇️ navigate with both\n      navigate('/generator', { \n        state: { \n          productType: 'case', \n          prompt: original,         // user input\n          boostedPrompt: boostedPrompt, // AI boosted\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        } \n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n\n  const handleBackToSelection = () => {\n    navigate('/');\n  };\n\n  const handleOpenMindmap = () => {\n    navigate('/mindmap', { state: { productType: 'case' } });\n  };\n  \n  const handleOpenTimeline = () => {\n    navigate('/timeline', { state: { productType: 'case' } });\n  };\n  \n  const handleTryLuck = () => {\n    const luckyPrompts = [\n      \"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\",\n      \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\",\n      \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\",\n      \"設計一款未來科技感的開放式機箱，突顯內部組件\"\n    ];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>, type: 'base' | 'reference') => {\n    const file = event.target.files?.[0] || null;\n    if (type === 'base') {\n      setBaseImage(file);\n    } else {\n      setReferenceImage(file);\n    }\n  };\n\n  const handleNodeSelect = (node: any) => {\n    setCurrentPrompt(node.data.prompt);\n    // Optionally, you could auto-submit this prompt\n    // handlePromptSubmit(node.data.prompt);\n  };\n\n  return (\n    <div className=\"home-container pb-24\">\n      <div className=\"content-container max-w-2xl mx-auto p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <button \n            onClick={handleBackToSelection}\n            className=\"flex items-center text-black hover:text-gray-700\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            返回選擇\n          </button>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={handleOpenTimeline}\n              className=\"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n            >\n              <ClockIcon className=\"w-5 h-5 mr-2\" />\n              歷史記錄\n            </button>\n            <button\n              onClick={handleOpenMindmap}\n              className=\"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n            >\n              <LightBulbIcon className=\"w-5 h-5 mr-2\" />\n              心智圖\n            </button>\n          </div>\n        </div>\n\n        <h1 className=\"text-3xl font-bold text-center mb-4 text-black\">主機外殼設計</h1>\n        \n        {/* Banner button for \"Try Your Luck\" */}\n        <div className=\"w-full flex justify-center mb-8\">\n          <button\n            onClick={handleTryLuck}\n            className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 transition-all shadow-lg\"\n          >\n            試手氣\n          </button>\n        </div>\n{/* ——— New ChatGPT-style Input ——— */}\n<div className=\"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\">\n  <textarea\n    value={currentPrompt}\n    onChange={e => {\n      setCurrentPrompt(e.target.value);\n      e.target.style.height = 'auto';\n      e.target.style.height = e.target.scrollHeight + 'px';\n    }}\n    onKeyDown={async (e) => {\n      if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n        //e.preventDefault();\n        //handlePromptSubmit(currentPrompt.trim());\n        e.preventDefault();\n        const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n        handlePromptSubmit(boostedPrompt, currentPrompt.trim()); // <-- now pass boosted prompt here!\n      }\n    }}\n    placeholder=\"描述您理想中的散熱器設計...\"\n    rows={1}\n    className=\"\n      flex-1 resize-none overflow-hidden \n      bg-white text-gray-800 placeholder-purple-400 \n      focus:outline-none\n    \"\n    disabled={loading}\n  />\n\n  <button\n    onClick={() => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim())}\n    disabled={loading || !currentPrompt.trim()}\n    className={`\n      p-2 rounded-md transition\n      ${currentPrompt.trim()\n        ? 'bg-purple-600 hover:bg-purple-700 text-white'\n        : 'bg-purple-100 text-purple-300 cursor-not-allowed'}\n    `}\n  >\n    <PaperAirplaneIcon className=\"w-5 h-5\" />\n  </button>\n</div>\n\n        \n        {/* Upload Image Sections */}\n        <div className=\"grid grid-cols-2 gap-4 mb-8\">\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">Upload Base Image</h3>\n            <input \n              type=\"file\" \n              accept=\"image/*\" \n              onChange={(e) => handleFileChange(e, 'base')}\n              className=\"block w-full text-sm text-gray-500\n                file:mr-4 file:py-2 file:px-4\n                file:rounded-full file:border-0\n                file:text-sm file:font-semibold\n                file:bg-purple-50 file:text-purple-700\n                hover:file:bg-purple-100\"\n            />\n            {baseImage && (\n              <div className=\"mt-2\">\n                <p className=\"text-xs text-gray-500\">Selected: {baseImage.name}</p>\n              </div>\n            )}\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">Upload Reference Image</h3>\n            <input \n              type=\"file\" \n              accept=\"image/*\" \n              onChange={(e) => handleFileChange(e, 'reference')}\n              className=\"block w-full text-sm text-gray-500\n                file:mr-4 file:py-2 file:px-4\n                file:rounded-full file:border-0\n                file:text-sm file:font-semibold\n                file:bg-purple-50 file:text-purple-700\n                hover:file:bg-purple-100\"\n            />\n            {referenceImage && (\n              <div className=\"mt-2\">\n                <p className=\"text-xs text-gray-500\">Selected: {referenceImage.name}</p>\n              </div>\n            )}\n          </div>\n        </div>\n        \n{/* ——— Timeline Section ——— */}\n<div className=\"bg-white rounded-lg shadow-lg p-4\">\n  <h2 className=\"text-lg font-semibold mb-4 text-gray-900\">Chats in this project</h2>\n  {timelineNodes.length > 0 ? (\n    <div className=\"space-y-2\">\n      {timelineNodes.map((node, index) => (\n        <div\n          key={node.id || index}\n          className=\"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\"\n        >\n          <div className=\"flex items-start justify-between\">\n            <div\n              onClick={() => handleNodeSelect(node)}\n              className=\"flex items-start space-x-3 cursor-pointer flex-1\"\n            >\n              {node.data.imageUrl && (\n                <img\n                  src={node.data.imageUrl}\n                  alt={node.data.prompt}\n                  className=\"w-12 h-12 object-cover rounded-md\"\n                />\n              )}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm text-gray-800 truncate\">{node.data.prompt}</p>\n                <div className=\"flex flex-wrap gap-1 mt-1\">\n                  {node.data.tags?.map((tag: string, tagIdx: number) => (\n                    <span\n                      key={tagIdx}\n                      className=\"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\"\n                    >\n                      {tag}\n                    </span>\n                  ))}\n                </div>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  {new Date(node.data.timestamp).toLocaleString()}\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={() => handlePromptSubmit(node.data.prompt, node.data.prompt)}\n              className=\"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\"\n            >\n              重新使用\n            </button>\n          </div>\n        </div>\n      ))}\n    </div>\n  ) : (\n    <p className=\"text-gray-500\">No history found yet.</p>\n  )}\n</div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default CasePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}