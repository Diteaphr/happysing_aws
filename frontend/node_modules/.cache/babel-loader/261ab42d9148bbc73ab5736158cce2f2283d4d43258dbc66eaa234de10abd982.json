{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\\\u96F2\\u6E67\\u667A\\u751F\\\\happysing_aws\\\\frontend\\\\src\\\\pages\\\\CasePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { PaperAirplaneIcon } from '@heroicons/react/24/outline';\nimport './Home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CasePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState(null);\n  const [referenceImage, setReferenceImage] = useState(null);\n  const [timelineNodes, setTimelineNodes] = useState([]);\n  const [showImageModal, setShowImageModal] = useState(false);\n  const [availableImages, setAvailableImages] = useState([]);\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item, index) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n  async function callPromptBooster(promptText) {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n    const data = await response.json();\n    return data.boosted_prompt;\n  }\n  const handlePromptSubmit = async (promptText, original) => {\n    setLoading(true);\n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n      const newHistoryItem = {\n        prompt: promptText,\n        timestamp: Date.now()\n      };\n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n      setTimelineNodes(prevNodes => [...prevNodes, {\n        id: `node-${prevNodes.length}`,\n        data: {\n          prompt: promptText,\n          timestamp: newHistoryItem.timestamp,\n          tags: ['主機外殼'],\n          imageUrl: null\n        }\n      }]);\n      navigate('/generator', {\n        state: {\n          productType: 'case',\n          prompt: original,\n          boostedPrompt: boostedPrompt,\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        }\n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFileChange = (event, type) => {\n    var _event$target$files;\n    const file = ((_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0]) || null;\n    if (type === 'base') {\n      setBaseImage(file);\n    } else {\n      setReferenceImage(file);\n    }\n  };\n  const openImageSelector = async () => {\n    try {\n      const res = await axios.get('/api/get-images');\n      setAvailableImages(res.data.images);\n      setShowImageModal(true);\n    } catch (error) {\n      console.error('載入資料庫圖片失敗', error);\n    }\n  };\n  const handleSelectImage = img => {\n    fetch(img.url).then(res => res.blob()).then(blob => {\n      const file = new File([blob], img.description + '.jpg', {\n        type: blob.type\n      });\n      setBaseImage(file);\n    });\n    setShowImageModal(false);\n  };\n  const handleTryLuck = () => {\n    const luckyPrompts = [\"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\", \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\", \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\", \"設計一款未來科技感的開放式機箱，突顯內部組件\"];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container pb-24\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-container max-w-2xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"flex items-center text-black hover:text-gray-700\",\n          children: \"\\u8FD4\\u56DE\\u9078\\u64C7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/timeline', {\n              state: {\n                productType: 'case'\n              }\n            }),\n            className: \"bg-purple-600 text-white px-4 py-2 rounded-lg\",\n            children: \"\\u6B77\\u53F2\\u8A18\\u9304\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/mindmap', {\n              state: {\n                productType: 'case'\n              }\n            }),\n            className: \"bg-purple-600 text-white px-4 py-2 rounded-lg\",\n            children: \"\\u5FC3\\u667A\\u5716\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-center mb-4 text-black\",\n        children: \"\\u4E3B\\u6A5F\\u5916\\u6BBC\\u8A2D\\u8A08\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full flex justify-center mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleTryLuck,\n          className: \"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 shadow-lg\",\n          children: \"\\u8A66\\u624B\\u6C23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: currentPrompt,\n          onChange: e => {\n            setCurrentPrompt(e.target.value);\n            e.target.style.height = 'auto';\n            e.target.style.height = e.target.scrollHeight + 'px';\n          },\n          onKeyDown: async e => {\n            if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n              e.preventDefault();\n              const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n              handlePromptSubmit(boostedPrompt, currentPrompt.trim());\n            }\n          },\n          placeholder: \"\\u63CF\\u8FF0\\u60A8\\u7406\\u60F3\\u4E2D\\u7684\\u6563\\u71B1\\u5668\\u8A2D\\u8A08...\",\n          rows: 1,\n          className: \"flex-1 resize-none overflow-hidden bg-white text-gray-800 placeholder-purple-400 focus:outline-none\",\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim()),\n          disabled: loading || !currentPrompt.trim(),\n          className: \"p-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white\",\n          children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"Upload Base Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => handleFileChange(e, 'base'),\n            className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: openImageSelector,\n            className: \"mt-2 w-full text-sm text-white bg-purple-500 hover:bg-purple-600 px-4 py-2 rounded\",\n            children: \"\\u5F9E\\u8CC7\\u6599\\u5EAB\\u9078\\u64C7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), baseImage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: [\"Selected: \", baseImage.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"Upload Reference Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => handleFileChange(e, 'reference'),\n            className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-4 text-gray-900\",\n          children: \"Chats in this project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), timelineNodes.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: timelineNodes.map((node, index) => {\n            var _node$data$tags;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => setCurrentPrompt(node.data.prompt),\n                  className: \"flex items-start space-x-3 cursor-pointer flex-1\",\n                  children: [node.data.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: node.data.imageUrl,\n                    alt: node.data.prompt,\n                    className: \"w-12 h-12 object-cover rounded-md\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1 min-w-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-800 truncate\",\n                      children: node.data.prompt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-wrap gap-1 mt-1\",\n                      children: (_node$data$tags = node.data.tags) === null || _node$data$tags === void 0 ? void 0 : _node$data$tags.map((tag, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\",\n                        children: tag\n                      }, idx, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 215,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mt-1\",\n                      children: new Date(node.data.timestamp).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 218,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handlePromptSubmit(node.data.prompt, node.data.prompt),\n                  className: \"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\",\n                  children: \"\\u91CD\\u65B0\\u4F7F\\u7528\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)\n            }, node.id || index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No history found yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), showImageModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-lg w-4/5 max-w-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold mb-4 text-center\",\n            children: \"\\u5F9E\\u8CC7\\u6599\\u5EAB\\u4E2D\\u9078\\u64C7\\u5716\\u7247\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto\",\n            children: availableImages.map((img, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded p-2 cursor-pointer hover:bg-purple-100\",\n              onClick: () => handleSelectImage(img),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: img.url,\n                alt: img.description,\n                className: \"w-full h-24 object-cover rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-center mt-2\",\n                children: img.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowImageModal(false),\n            className: \"mt-4 w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded\",\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n_s(CasePage, \"lUdqUmIi37lmUkRsr0UfI0cYIN4=\", false, function () {\n  return [useNavigate];\n});\n_c = CasePage;\nexport default CasePage;\nvar _c;\n$RefreshReg$(_c, \"CasePage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","PaperAirplaneIcon","jsxDEV","_jsxDEV","CasePage","_s","navigate","loading","setLoading","currentPrompt","setCurrentPrompt","baseImage","setBaseImage","referenceImage","setReferenceImage","timelineNodes","setTimelineNodes","showImageModal","setShowImageModal","availableImages","setAvailableImages","stored","localStorage","getItem","history","JSON","parse","map","item","index","id","data","prompt","timestamp","Date","now","tags","imageUrl","error","console","callPromptBooster","promptText","response","fetch","method","headers","body","stringify","user_prompt","inspiration_image_ids","use_trends","json","boosted_prompt","handlePromptSubmit","original","boostedPrompt","newHistoryItem","push","setItem","prevNodes","length","state","productType","URL","createObjectURL","handleFileChange","event","type","_event$target$files","file","target","files","openImageSelector","res","get","images","handleSelectImage","img","url","then","blob","File","description","handleTryLuck","luckyPrompts","randomPrompt","Math","floor","random","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","style","height","scrollHeight","onKeyDown","key","shiftKey","trim","preventDefault","placeholder","rows","disabled","accept","name","node","_node$data$tags","src","alt","tag","idx","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/雲湧智生/happysing_aws/frontend/src/pages/CasePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { LightBulbIcon, ClockIcon, PaperAirplaneIcon } from '@heroicons/react/24/outline';\nimport './Home.css';\nimport { Timeline } from '../components/Timeline';\nimport ChatInput from '../components/ChatInput';\n\nconst CasePage: React.FC = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState<File | null>(null);\n  const [referenceImage, setReferenceImage] = useState<File | null>(null);\n  const [timelineNodes, setTimelineNodes] = useState<any[]>([]);\n  const [showImageModal, setShowImageModal] = useState(false);\n  const [availableImages, setAvailableImages] = useState<{ url: string; description: string }[]>([]);\n\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item: any, index: number) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n\n  async function callPromptBooster(promptText: string): Promise<string> {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n    const data = await response.json();\n    return data.boosted_prompt;\n  }\n\n  const handlePromptSubmit = async (promptText: string, original: string) => {\n    setLoading(true);\n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n      const newHistoryItem = {\n        prompt: promptText,\n        timestamp: Date.now()\n      };\n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n      setTimelineNodes(prevNodes => [...prevNodes, {\n        id: `node-${prevNodes.length}`,\n        data: {\n          prompt: promptText,\n          timestamp: newHistoryItem.timestamp,\n          tags: ['主機外殼'],\n          imageUrl: null\n        }\n      }]);\n      navigate('/generator', {\n        state: {\n          productType: 'case',\n          prompt: original,\n          boostedPrompt: boostedPrompt,\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        }\n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>, type: 'base' | 'reference') => {\n    const file = event.target.files?.[0] || null;\n    if (type === 'base') {\n      setBaseImage(file);\n    } else {\n      setReferenceImage(file);\n    }\n  };\n\n  const openImageSelector = async () => {\n    try {\n      const res = await axios.get('/api/get-images');\n      setAvailableImages(res.data.images);\n      setShowImageModal(true);\n    } catch (error) {\n      console.error('載入資料庫圖片失敗', error);\n    }\n  };\n\n  const handleSelectImage = (img: { url: string; description: string }) => {\n    fetch(img.url)\n      .then(res => res.blob())\n      .then(blob => {\n        const file = new File([blob], img.description + '.jpg', { type: blob.type });\n        setBaseImage(file);\n      });\n    setShowImageModal(false);\n  };\n\n  const handleTryLuck = () => {\n    const luckyPrompts = [\n      \"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\",\n      \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\",\n      \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\",\n      \"設計一款未來科技感的開放式機箱，突顯內部組件\"\n    ];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n\n  return (\n    <div className=\"home-container pb-24\">\n      <div className=\"content-container max-w-2xl mx-auto p-6\">\n        {/* 上方功能按鈕 */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <button onClick={() => navigate('/')} className=\"flex items-center text-black hover:text-gray-700\">\n            返回選擇\n          </button>\n          <div className=\"flex gap-2\">\n            <button onClick={() => navigate('/timeline', { state: { productType: 'case' } })} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg\">歷史記錄</button>\n            <button onClick={() => navigate('/mindmap', { state: { productType: 'case' } })} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg\">心智圖</button>\n          </div>\n        </div>\n\n        <h1 className=\"text-3xl font-bold text-center mb-4 text-black\">主機外殼設計</h1>\n\n        {/* 試手氣按鈕 */}\n        <div className=\"w-full flex justify-center mb-8\">\n          <button onClick={handleTryLuck} className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 shadow-lg\">\n            試手氣\n          </button>\n        </div>\n\n        {/* 輸入框 */}\n        <div className=\"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\">\n          <textarea\n            value={currentPrompt}\n            onChange={e => {\n              setCurrentPrompt(e.target.value);\n              e.target.style.height = 'auto';\n              e.target.style.height = e.target.scrollHeight + 'px';\n            }}\n            onKeyDown={async e => {\n              if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n                e.preventDefault();\n                const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n                handlePromptSubmit(boostedPrompt, currentPrompt.trim());\n              }\n            }}\n            placeholder=\"描述您理想中的散熱器設計...\"\n            rows={1}\n            className=\"flex-1 resize-none overflow-hidden bg-white text-gray-800 placeholder-purple-400 focus:outline-none\"\n            disabled={loading}\n          />\n          <button onClick={() => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim())} disabled={loading || !currentPrompt.trim()} className=\"p-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white\">\n            <PaperAirplaneIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* 上傳圖片區塊 */}\n        <div className=\"grid grid-cols-2 gap-4 mb-8\">\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">Upload Base Image</h3>\n            <input type=\"file\" accept=\"image/*\" onChange={e => handleFileChange(e, 'base')} className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\" />\n            <button onClick={openImageSelector} className=\"mt-2 w-full text-sm text-white bg-purple-500 hover:bg-purple-600 px-4 py-2 rounded\">\n              從資料庫選擇\n            </button>\n            {baseImage && (\n              <div className=\"mt-2\">\n                <p className=\"text-xs text-gray-500\">Selected: {baseImage.name}</p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">Upload Reference Image</h3>\n            <input type=\"file\" accept=\"image/*\" onChange={e => handleFileChange(e, 'reference')} className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\" />\n          </div>\n        </div>\n\n        {/* Timeline 區塊 */}\n        <div className=\"bg-white rounded-lg shadow-lg p-4\">\n          <h2 className=\"text-lg font-semibold mb-4 text-gray-900\">Chats in this project</h2>\n          {timelineNodes.length > 0 ? (\n            <div className=\"space-y-2\">\n              {timelineNodes.map((node, index) => (\n                <div key={node.id || index} className=\"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\">\n                  <div className=\"flex items-start justify-between\">\n                    <div onClick={() => setCurrentPrompt(node.data.prompt)} className=\"flex items-start space-x-3 cursor-pointer flex-1\">\n                      {node.data.imageUrl && <img src={node.data.imageUrl} alt={node.data.prompt} className=\"w-12 h-12 object-cover rounded-md\" />}\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm text-gray-800 truncate\">{node.data.prompt}</p>\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          {node.data.tags?.map((tag: string, idx: number) => (\n                            <span key={idx} className=\"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\">{tag}</span>\n                          ))}\n                        </div>\n                        <p className=\"text-xs text-gray-500 mt-1\">{new Date(node.data.timestamp).toLocaleString()}</p>\n                      </div>\n                    </div>\n                    <button onClick={() => handlePromptSubmit(node.data.prompt, node.data.prompt)} className=\"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\">\n                      重新使用\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500\">No history found yet.</p>\n          )}\n        </div>\n\n        {/* 彈窗區塊 */}\n        {showImageModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n            <div className=\"bg-white p-6 rounded-lg w-4/5 max-w-md\">\n              <h2 className=\"text-lg font-bold mb-4 text-center\">從資料庫中選擇圖片</h2>\n              <div className=\"grid grid-cols-2 gap-4 max-h-80 overflow-y-auto\">\n                {availableImages.map((img, idx) => (\n                  <div \n                    key={idx}\n                    className=\"border rounded p-2 cursor-pointer hover:bg-purple-100\"\n                    onClick={() => handleSelectImage(img)}\n                  >\n                    <img src={img.url} alt={img.description} className=\"w-full h-24 object-cover rounded\" />\n                    <p className=\"text-xs text-center mt-2\">{img.description}</p>\n                  </div>\n                ))}\n              </div>\n              <button\n                onClick={() => setShowImageModal(false)}\n                className=\"mt-4 w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded\"\n              >\n                取消\n              </button>\n            </div>\n          </div>\n        )}\n\n      </div>\n    </div>\n  );\n};\n\nexport default CasePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}