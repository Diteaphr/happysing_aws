{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\\\u96F2\\u6E67\\u667A\\u751F\\\\happysing_aws\\\\frontend\\\\src\\\\pages\\\\CasePage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { PaperAirplaneIcon } from '@heroicons/react/24/outline';\nimport './Home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CasePage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState(null);\n  const [referenceImage, setReferenceImage] = useState(null);\n  const [timelineNodes, setTimelineNodes] = useState([]);\n  const [availableImages, setAvailableImages] = useState([]);\n  const [showImages, setShowImages] = useState(false);\n  const [loadingImages, setLoadingImages] = useState(false);\n  const [imageError, setImageError] = useState(null);\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item, index) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n  async function callPromptBooster(promptText) {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n    const data = await response.json();\n    return data.boosted_prompt;\n  }\n  const handlePromptSubmit = async (promptText, original) => {\n    setLoading(true);\n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n      const newHistoryItem = {\n        prompt: promptText,\n        timestamp: Date.now()\n      };\n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n      setTimelineNodes(prevNodes => [...prevNodes, {\n        id: `node-${prevNodes.length}`,\n        data: {\n          prompt: promptText,\n          timestamp: newHistoryItem.timestamp,\n          tags: ['主機外殼'],\n          imageUrl: null\n        }\n      }]);\n      navigate('/generator', {\n        state: {\n          productType: 'case',\n          prompt: original,\n          boostedPrompt: boostedPrompt,\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        }\n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const openImageSelector = () => {\n    navigate('/select-image');\n  };\n  const handleSelectImage = async img => {\n    try {\n      const response = await fetch(img.url);\n      if (!response.ok) throw new Error('圖片載入失敗');\n      const blob = await response.blob();\n      const file = new File([blob], img.description + '.jpg', {\n        type: blob.type\n      });\n      setBaseImage(file);\n      setShowImages(false);\n    } catch (error) {\n      console.error('選擇圖片失敗', error);\n      setImageError('選擇圖片失敗，請稍後再試');\n    }\n  };\n  const handleFileChange = (event, type) => {\n    var _event$target$files;\n    const file = ((_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0]) || null;\n    if (type === 'reference') {\n      setReferenceImage(file);\n    }\n  };\n  const handleTryLuck = () => {\n    const luckyPrompts = [\"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\", \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\", \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\", \"設計一款未來科技感的開放式機箱，突顯內部組件\"];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-container pb-24\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-container max-w-2xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate('/'),\n          className: \"flex items-center text-black hover:text-gray-700\",\n          children: \"\\u8FD4\\u56DE\\u9078\\u64C7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/timeline', {\n              state: {\n                productType: 'case'\n              }\n            }),\n            className: \"bg-purple-600 text-white px-4 py-2 rounded-lg\",\n            children: \"\\u6B77\\u53F2\\u8A18\\u9304\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigate('/mindmap', {\n              state: {\n                productType: 'case'\n              }\n            }),\n            className: \"bg-purple-600 text-white px-4 py-2 rounded-lg\",\n            children: \"\\u5FC3\\u667A\\u5716\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-center mb-4 text-black\",\n        children: \"\\u4E3B\\u6A5F\\u5916\\u6BBC\\u8A2D\\u8A08\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full flex justify-center mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleTryLuck,\n          className: \"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 shadow-lg\",\n          children: \"\\u8A66\\u624B\\u6C23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: currentPrompt,\n          onChange: e => {\n            setCurrentPrompt(e.target.value);\n            e.target.style.height = 'auto';\n            e.target.style.height = e.target.scrollHeight + 'px';\n          },\n          onKeyDown: async e => {\n            if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n              e.preventDefault();\n              const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n              handlePromptSubmit(boostedPrompt, currentPrompt.trim());\n            }\n          },\n          placeholder: \"\\u63CF\\u8FF0\\u60A8\\u7406\\u60F3\\u4E2D\\u7684\\u6563\\u71B1\\u5668\\u8A2D\\u8A08...\",\n          rows: 1,\n          className: \"flex-1 resize-none overflow-hidden bg-white text-gray-800 placeholder-purple-400 focus:outline-none\",\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim()),\n          disabled: loading || !currentPrompt.trim(),\n          className: \"p-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white\",\n          children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"\\u9078\\u64C7 Base Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: openImageSelector,\n              disabled: loadingImages,\n              className: \"file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 text-sm py-2 px-4 rounded-full bg-purple-100 text-purple-700 hover:bg-purple-200 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: loadingImages ? '載入中...' : '從資料庫載入圖片'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col items-center gap-2\",\n              children: baseImage ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-500\",\n                children: baseImage.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this) : (() => {\n                const selectedImageUrl = localStorage.getItem('selectedBaseImageUrl');\n                if (selectedImageUrl) {\n                  return /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: selectedImageUrl,\n                    alt: \"\\u9078\\u64C7\\u7684 Base Image\",\n                    className: \"w-32 h-32 object-contain rounded-lg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 23\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"\\u672A\\u9078\\u64C7\\u4EFB\\u4F55\\u5716\\u7247\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 23\n                  }, this);\n                }\n              })()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), imageError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-red-500 text-sm\",\n            children: imageError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), showImages && availableImages.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-4 mt-4 max-h-64 overflow-y-auto\",\n            children: availableImages.map(img => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded p-2 cursor-pointer hover:bg-purple-100 transition-colors\",\n              onClick: () => handleSelectImage(img),\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: img.url,\n                alt: img.description,\n                className: \"w-full h-24 object-cover rounded\",\n                onError: () => setImageError('圖片載入失敗')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-center truncate\",\n                  children: img.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 text-center mt-1\",\n                  children: new Date(img.created_at).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }, this)]\n            }, img.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-md font-extrabold mb-3 text-black font-inter\",\n            children: \"Upload Reference Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => handleFileChange(e, 'reference'),\n            className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold mb-4 text-gray-900\",\n          children: \"Chats in this project\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), timelineNodes.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: timelineNodes.map((node, index) => {\n            var _node$data$tags;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  onClick: () => setCurrentPrompt(node.data.prompt),\n                  className: \"flex items-start space-x-3 cursor-pointer flex-1\",\n                  children: [node.data.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: node.data.imageUrl,\n                    alt: node.data.prompt,\n                    className: \"w-12 h-12 object-cover rounded-md\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 46\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1 min-w-0\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-800 truncate\",\n                      children: node.data.prompt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex flex-wrap gap-1 mt-1\",\n                      children: (_node$data$tags = node.data.tags) === null || _node$data$tags === void 0 ? void 0 : _node$data$tags.map((tag, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\",\n                        children: tag\n                      }, idx, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 289,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mt-1\",\n                      children: new Date(node.data.timestamp).toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handlePromptSubmit(node.data.prompt, node.data.prompt),\n                  className: \"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\",\n                  children: \"\\u91CD\\u65B0\\u4F7F\\u7528\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)\n            }, node.id || index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"No history found yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n};\n_s(CasePage, \"UVN8+qWUSKCIxrH6lDINB7z36Us=\", false, function () {\n  return [useNavigate];\n});\n_c = CasePage;\nexport default CasePage;\nvar _c;\n$RefreshReg$(_c, \"CasePage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","PaperAirplaneIcon","jsxDEV","_jsxDEV","CasePage","_s","navigate","loading","setLoading","currentPrompt","setCurrentPrompt","baseImage","setBaseImage","referenceImage","setReferenceImage","timelineNodes","setTimelineNodes","availableImages","setAvailableImages","showImages","setShowImages","loadingImages","setLoadingImages","imageError","setImageError","stored","localStorage","getItem","history","JSON","parse","map","item","index","id","data","prompt","timestamp","Date","now","tags","imageUrl","error","console","callPromptBooster","promptText","response","fetch","method","headers","body","stringify","user_prompt","inspiration_image_ids","use_trends","json","boosted_prompt","handlePromptSubmit","original","boostedPrompt","newHistoryItem","push","setItem","prevNodes","length","state","productType","URL","createObjectURL","openImageSelector","handleSelectImage","img","url","ok","Error","blob","file","File","description","type","handleFileChange","event","_event$target$files","target","files","handleTryLuck","luckyPrompts","randomPrompt","Math","floor","random","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","style","height","scrollHeight","onKeyDown","key","shiftKey","trim","preventDefault","placeholder","rows","disabled","name","selectedImageUrl","src","alt","onError","created_at","toLocaleDateString","accept","node","_node$data$tags","tag","idx","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/雲湧智生/happysing_aws/frontend/src/pages/CasePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { LightBulbIcon, ClockIcon, PaperAirplaneIcon } from '@heroicons/react/24/outline';\nimport './Home.css';\nimport { Timeline } from '../components/Timeline';\nimport ChatInput from '../components/ChatInput';\n\nconst CasePage: React.FC = () => {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentPrompt, setCurrentPrompt] = useState('');\n  const [baseImage, setBaseImage] = useState<File | null>(null);\n  const [referenceImage, setReferenceImage] = useState<File | null>(null);\n  const [timelineNodes, setTimelineNodes] = useState<any[]>([]);\n  const [availableImages, setAvailableImages] = useState<{ \n    id: number;\n    url: string; \n    description: string;\n    created_at: string;\n    updated_at: string;\n  }[]>([]);\n  const [showImages, setShowImages] = useState(false);\n  const [loadingImages, setLoadingImages] = useState(false);\n  const [imageError, setImageError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const stored = localStorage.getItem('case-history');\n    if (stored) {\n      try {\n        const history = JSON.parse(stored);\n        setTimelineNodes(history.map((item: any, index: number) => ({\n          id: `node-${index}`,\n          data: {\n            prompt: item.prompt,\n            timestamp: item.timestamp || Date.now(),\n            tags: ['主機外殼'],\n            imageUrl: item.imageUrl || null\n          }\n        })));\n      } catch (error) {\n        console.error('Error parsing case history:', error);\n      }\n    }\n  }, []);\n\n  async function callPromptBooster(promptText: string): Promise<string> {\n    const response = await fetch('https://409etc6v1f.execute-api.us-west-2.amazonaws.com/promptbooster', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        user_prompt: promptText,\n        inspiration_image_ids: [],\n        use_trends: true\n      })\n    });\n    const data = await response.json();\n    return data.boosted_prompt;\n  }\n\n  const handlePromptSubmit = async (promptText: string, original: string) => {\n    setLoading(true);\n    try {\n      const boostedPrompt = await callPromptBooster(promptText);\n      const newHistoryItem = {\n        prompt: promptText,\n        timestamp: Date.now()\n      };\n      const stored = localStorage.getItem('case-history');\n      const history = stored ? JSON.parse(stored) : [];\n      history.push(newHistoryItem);\n      localStorage.setItem('case-history', JSON.stringify(history));\n      setTimelineNodes(prevNodes => [...prevNodes, {\n        id: `node-${prevNodes.length}`,\n        data: {\n          prompt: promptText,\n          timestamp: newHistoryItem.timestamp,\n          tags: ['主機外殼'],\n          imageUrl: null\n        }\n      }]);\n      navigate('/generator', {\n        state: {\n          productType: 'case',\n          prompt: original,\n          boostedPrompt: boostedPrompt,\n          baseImage: baseImage ? URL.createObjectURL(baseImage) : null,\n          referenceImage: referenceImage ? URL.createObjectURL(referenceImage) : null\n        }\n      });\n    } catch (error) {\n      console.error('Error boosting prompt:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openImageSelector = () => {\n    navigate('/select-image');\n  };\n\n  const handleSelectImage = async (img: { \n    id: number;\n    url: string; \n    description: string;\n    created_at: string;\n    updated_at: string;\n  }) => {\n    try {\n      const response = await fetch(img.url);\n      if (!response.ok) throw new Error('圖片載入失敗');\n      const blob = await response.blob();\n      const file = new File([blob], img.description + '.jpg', { type: blob.type });\n      setBaseImage(file);\n      setShowImages(false);\n    } catch (error) {\n      console.error('選擇圖片失敗', error);\n      setImageError('選擇圖片失敗，請稍後再試');\n    }\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>, type: 'base' | 'reference') => {\n    const file = event.target.files?.[0] || null;\n    if (type === 'reference') {\n      setReferenceImage(file);\n    }\n  };\n\n  const handleTryLuck = () => {\n    const luckyPrompts = [\n      \"設計一款簡約風格的中塔式機箱，前面板採用鋁合金材質，側板為強化玻璃\",\n      \"打造一款RGB燈效豐富的遊戲機箱，支援360mm水冷\",\n      \"創造一款極簡風格的ITX小型機箱，優化空間利用率與散熱\",\n      \"設計一款未來科技感的開放式機箱，突顯內部組件\"\n    ];\n    const randomPrompt = luckyPrompts[Math.floor(Math.random() * luckyPrompts.length)];\n    setCurrentPrompt(randomPrompt);\n    handlePromptSubmit(randomPrompt, randomPrompt);\n  };\n\n  return (\n    <div className=\"home-container pb-24\">\n      <div className=\"content-container max-w-2xl mx-auto p-6\">\n        \n        {/* 功能列 */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <button onClick={() => navigate('/')} className=\"flex items-center text-black hover:text-gray-700\">\n            返回選擇\n          </button>\n          <div className=\"flex gap-2\">\n            <button onClick={() => navigate('/timeline', { state: { productType: 'case' } })} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg\">歷史記錄</button>\n            <button onClick={() => navigate('/mindmap', { state: { productType: 'case' } })} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg\">心智圖</button>\n          </div>\n        </div>\n\n        <h1 className=\"text-3xl font-bold text-center mb-4 text-black\">主機外殼設計</h1>\n\n        {/* 試手氣按鈕 */}\n        <div className=\"w-full flex justify-center mb-8\">\n          <button onClick={handleTryLuck} className=\"px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white font-bold rounded-lg hover:from-purple-600 hover:to-indigo-700 shadow-lg\">\n            試手氣\n          </button>\n        </div>\n\n        {/* 輸入 Prompt */}\n        <div className=\"bg-white border border-purple-200 rounded-xl p-4 mb-6 flex items-end space-x-2 shadow-lg\">\n          <textarea\n            value={currentPrompt}\n            onChange={e => {\n              setCurrentPrompt(e.target.value);\n              e.target.style.height = 'auto';\n              e.target.style.height = e.target.scrollHeight + 'px';\n            }}\n            onKeyDown={async e => {\n              if (e.key === 'Enter' && !e.shiftKey && currentPrompt.trim()) {\n                e.preventDefault();\n                const boostedPrompt = await callPromptBooster(currentPrompt.trim());\n                handlePromptSubmit(boostedPrompt, currentPrompt.trim());\n              }\n            }}\n            placeholder=\"描述您理想中的散熱器設計...\"\n            rows={1}\n            className=\"flex-1 resize-none overflow-hidden bg-white text-gray-800 placeholder-purple-400 focus:outline-none\"\n            disabled={loading}\n          />\n          <button onClick={() => currentPrompt.trim() && handlePromptSubmit(currentPrompt.trim(), currentPrompt.trim())} disabled={loading || !currentPrompt.trim()} className=\"p-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white\">\n            <PaperAirplaneIcon className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* 上傳圖片區塊 */}\n        <div className=\"grid grid-cols-2 gap-4 mb-8\">\n          \n          {/* Base Image 改成從資料庫選 */}\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">選擇 Base Image</h3>\n\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={openImageSelector}\n                disabled={loadingImages}\n                className=\"file:mr-4 file:py-2 file:px-4\n                          file:rounded-full file:border-0\n                          file:bg-purple-50 file:text-purple-700\n                          hover:file:bg-purple-100 text-sm py-2 px-4 rounded-full bg-purple-100 text-purple-700 hover:bg-purple-200\n                          disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {loadingImages ? '載入中...' : '從資料庫載入圖片'}\n              </button>\n              <div className=\"flex flex-col items-center gap-2\">\n              {baseImage ? (\n                <span className=\"text-sm text-gray-500\">{baseImage.name}</span>\n              ) : (\n                (() => {\n                  const selectedImageUrl = localStorage.getItem('selectedBaseImageUrl');\n                  if (selectedImageUrl) {\n                    return (\n                      <img \n                        src={selectedImageUrl} \n                        alt=\"選擇的 Base Image\" \n                        className=\"w-32 h-32 object-contain rounded-lg\"\n                      />\n                    );\n                  } else {\n                    return (\n                      <span className=\"text-sm text-gray-500\">未選擇任何圖片</span>\n                    );\n                  }\n                })()\n              )}\n            </div>\n\n            </div>\n\n            {imageError && (\n              <div className=\"mt-2 text-red-500 text-sm\">{imageError}</div>\n            )}\n\n            {/* 只有在 showImages 時才展開圖片列表 */}\n            {showImages && availableImages.length > 0 && (\n              <div className=\"grid grid-cols-2 gap-4 mt-4 max-h-64 overflow-y-auto\">\n                {availableImages.map((img) => (\n                  <div\n                    key={img.id}\n                    className=\"border rounded p-2 cursor-pointer hover:bg-purple-100 transition-colors\"\n                    onClick={() => handleSelectImage(img)}\n                  >\n                    <img \n                      src={img.url} \n                      alt={img.description} \n                      className=\"w-full h-24 object-cover rounded\"\n                      onError={() => setImageError('圖片載入失敗')}\n                    />\n                    <div className=\"mt-2\">\n                      <p className=\"text-xs text-center truncate\">{img.description}</p>\n                      <p className=\"text-xs text-gray-500 text-center mt-1\">\n                        {new Date(img.created_at).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n\n          {/* Reference Image 仍保留上傳 */}\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <h3 className=\"text-md font-extrabold mb-3 text-black font-inter\">Upload Reference Image</h3>\n            <input type=\"file\" accept=\"image/*\" onChange={e => handleFileChange(e, 'reference')} className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100\" />\n          </div>\n\n        </div>\n\n        {/* Timeline 區 */}\n        <div className=\"bg-white rounded-lg shadow-lg p-4\">\n          <h2 className=\"text-lg font-semibold mb-4 text-gray-900\">Chats in this project</h2>\n          {timelineNodes.length > 0 ? (\n            <div className=\"space-y-2\">\n              {timelineNodes.map((node, index) => (\n                <div key={node.id || index} className=\"p-3 bg-white rounded-md hover:bg-purple-50 transition-colors shadow-lg\">\n                  <div className=\"flex items-start justify-between\">\n                    <div onClick={() => setCurrentPrompt(node.data.prompt)} className=\"flex items-start space-x-3 cursor-pointer flex-1\">\n                      {node.data.imageUrl && <img src={node.data.imageUrl} alt={node.data.prompt} className=\"w-12 h-12 object-cover rounded-md\" />}\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm text-gray-800 truncate\">{node.data.prompt}</p>\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\n                          {node.data.tags?.map((tag: string, idx: number) => (\n                            <span key={idx} className=\"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full\">{tag}</span>\n                          ))}\n                        </div>\n                        <p className=\"text-xs text-gray-500 mt-1\">{new Date(node.data.timestamp).toLocaleString()}</p>\n                      </div>\n                    </div>\n                    <button onClick={() => handlePromptSubmit(node.data.prompt, node.data.prompt)} className=\"ml-2 px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs font-medium rounded transition-colors\">\n                      重新使用\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500\">No history found yet.</p>\n          )}\n        </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default CasePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}